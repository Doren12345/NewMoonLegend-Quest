# -------------------- Display settings --------------------

display_name: '&e[主線]龍的誕生'

start_notify:
  title: '&a任務開始'
  title_subtitle: '&7開始進行 &a{quest} &7任務'
  sound: ENTITY_PLAYER_LEVELUP

progress_notify:
  actionbar: '&a{quest} &7| {objective}'

all_status_item:
  type: END_CRYSTAL
  name: '&6{quest}'
  lore: |-
    &f--------------------
    &f任務報酬：
    &f- &e金幣&fx1000
    &f- &a總經驗值&fx61250
    &f--------------------{detailed_progression}
    {controls}

# -------------------- Post-quest settings --------------------

completion:
  notify:
    SUCCESS:
      title: '&d任務完成'
      title_subtitle: '&7你完成了任務 &a{quest} &7!'
      sound: ENTITY_PLAYER_LEVELUP
      message:
        - '&f--------------------'
        - '&f解鎖&e[主線]赤紅沙漠的求救信號'
        - '&f可在&a[博多斯村莊]&f向&a<羅柏#97>&f接取'
        - '&f--------------------'
        - '&f需要滿足以下條件才能接取任務：'
        - '&a等級：Lv40'
        - '&f--------------------'
    FAIL:
      title: '&cQuest failed'
      title_subtitle: '&7You failed quest &c{quest} &7!'
      sound: BLOCK_ANVIL_DESTROY
    CANCEL:
      title: '&c任務取消'
      title_subtitle: '&7你取消了任務 &c{quest}'
      sound: BLOCK_ANVIL_DESTROY

activators: [cnpc294]

conditions_start_restriction:
  match_amount: 2
  conditions:
    1:
      type: LOGIC
      logic: '%mmocore_level% >= 30'
    2:
      type: QUEST_COMPLETED
      model: a_quest_29

display_priority: 1

branches:

  main:
    starts_at: 1
    objects:

      1:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 2
        toggle: true

      2:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 3
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<薩彌爾> &f不過黑龍的出現確實會令到這個世界帶來災難'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<薩彌爾> &f所以我們都必須阻止這件事情的發生'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      3:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [有甚麼方法防止?]'
            goto: OBJECT 4
            
      4:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 5
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<薩彌爾> &f黑龍其實嚴格來說不一定全是真正的龍'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<薩彌爾> &f牠是可以由人類製作出來的'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40

      5:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [這是甚麼情況?]'
            goto: OBJECT 6

      6:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 7
        actions:
          - 'SEND_MESSAGE &e[1/5]&a<薩彌爾> &f在歷史當中,其實只有提及黑龍有出現,其他的龍都沒有'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/5]&a<薩彌爾> &f原因是100年前的人類找到了傳說中的[神聖圖書館]'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/5]&a<薩彌爾> &f在裡面有一本書叫做[龍的誕生]'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[4/5]&a<薩彌爾> &f裡面其中一章就有提及黑龍如何召喚出來'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[5/5]&a<薩彌爾> &f所以就有黑龍的出現了'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          

      7:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [那黑龍是召喚出來的?]'
            goto: OBJECT 8

      8:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 9
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<薩彌爾> &f第一條黑龍的確是召喚出來的'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<薩彌爾> &f但是在50年前,黑龍曾經被製造過出來'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40

      9:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [這些事情是真的?歷史上從來沒有提及過]'
            goto: OBJECT 10

      10:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 11
        actions:
          - 'SEND_MESSAGE &e[1/4]&a<薩彌爾> &f那是因為被「隱瞞」下來了'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/4]&a<薩彌爾> &f如果黑龍能夠被人類製造出來的事傳開了'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/4]&a<薩彌爾> &f恐怕會有無數的邪惡份子想把黑龍製造出來'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[4/4]&a<薩彌爾> &f然後據為己有吧'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      11:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [那當時的製造黑龍的情況是如何?]'
            goto: OBJECT 12
          
      12:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 13
        actions:
          - 'SEND_MESSAGE &e[1/3]&a<薩彌爾> &f當時製造黑龍的是一班黑衣人'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/3]&a<薩彌爾> &f他們自稱[黑暗軍團],目的不明'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/3]&a<薩彌爾> &f只是知道他們有很強的執意要令黑龍重現'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      13:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [黑暗軍團!?我見過他們!]'
            goto: OBJECT 14
          
      14:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 15
        actions:
          - 'SEND_MESSAGE &e[1/8]&a<薩彌爾> &f他們一直都是在活躍的團隊'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/8]&a<薩彌爾> &f50年前的一場戰爭中'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/8]&a<薩彌爾> &f當時我和一名叫做[翔太]的勇者和一名女精靈'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[4/8]&a<薩彌爾> &f曾經和他們交過手'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[5/8]&a<薩彌爾> &f然後我們阻止了黑龍的復活'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[6/8]&a<薩彌爾> &f雖說是阻止,但其實只是在黑龍未成為[完成體]時擊殺'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[7/8]&a<薩彌爾> &f如果被黑龍成為[完成體]'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[8/8]&a<薩彌爾> &f以當時我們的實力,恐怕沒有可能阻止到他們'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      15:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<薩彌爾>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [那我們現在該怎麼辦?]'
            goto: OBJECT 16
          
      16:
        type: SERVER_ACTIONS
        objective_detail: '&a<薩彌爾>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<薩彌爾#99>&f對話'
        goto: OBJECT 17
        actions:
          - 'SEND_MESSAGE &e[1/6]&a<薩彌爾> &f先把實力練起來吧'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/6]&a<薩彌爾> &f我想黑暗軍團在近期會有更大的動作'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/6]&a<薩彌爾> &f我們再密切聯絡'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[4/6]&a<薩彌爾> &f但記住,今天所討論的內容一定要保密'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[5/6]&a<薩彌爾> &f即使是公會還是皇家禁衛隊的人'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[6/6]&a<薩彌爾> &f都不要說出去'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      17:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: QUEST_SUCCESS
        toggle: false
          
end_objects:
  success:
    a:
      type: SERVER_COMMANDS_PERFORM
      commands:
        - eco give {player} 1000
        - mmocore admin exp give {player} farm 61250
        - mmocore admin exp give {player} fishing 61250
        - mmocore admin exp give {player} food 61250
        - mmocore admin exp give {player} handicraft 61250
        - mmocore admin exp give {player} main 61250
        - mmocore admin exp give {player} mining 61250
        - mmocore admin exp give {player} alchemy 61250
  cancel:
    1:
      type: SERVER_COMMANDS_PERFORM
      commands: ['compass stop {player}']