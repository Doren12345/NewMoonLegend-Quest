# -------------------- Display settings --------------------

display_name: '&e[主線]變異的食人魚(上)'

start_notify:
  title: '&a任務開始'
  title_subtitle: '&7開始進行 &a{quest} &7任務'
  sound: ENTITY_PLAYER_LEVELUP

progress_notify:
  actionbar: '&a{quest} &7| {objective}'

all_status_item:
  type: END_CRYSTAL
  name: '&6{quest}'
  lore: |-
    &f--------------------
    &f任務報酬：
    &f- &e金幣&fx1000
    &f- &a總經驗值&fx48050
    &f--------------------{detailed_progression}
    {controls}

# -------------------- Post-quest settings --------------------

completion:
  notify:
    SUCCESS:
      title: '&d任務完成'
      title_subtitle: '&7你完成了任務 &a{quest} &7!'
      sound: ENTITY_PLAYER_LEVELUP
      message:
        - '&f--------------------'
        - '&f解鎖&e[主線]變異的食人魚(下)'
        - '&f可在&a[博多斯村莊]&f向&a<羅柏>&f接取'
        - '&f--------------------'
        - '&f需要滿足以下條件才能接取任務：'
        - '&a等級：Lv27'
        - '&f--------------------'
    FAIL:
      title: '&cQuest failed'
      title_subtitle: '&7You failed quest &c{quest} &7!'
      sound: BLOCK_ANVIL_DESTROY
    CANCEL:
      title: '&c任務取消'
      title_subtitle: '&7你取消了任務 &c{quest}'
      sound: BLOCK_ANVIL_DESTROY

activators: [cnpc92]

conditions_start_restriction:
  match_amount: 2
  conditions:
    1:
      type: LOGIC
      logic: '%mmocore_level% >= 26'
    2:
      type: QUEST_COMPLETED
      model: a_quest_25

display_priority: 1

branches:

  main:
    starts_at: 1
    objects:

      1:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 2
        toggle: true

      2:
        type: SERVER_ACTIONS
        objective_detail: '&a<羅柏>&f正在與你對話'
        objective_detail_verbose: '&f步驟-1 &f與&a<羅柏#97>&f對話'
        goto: OBJECT 3
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<羅柏> &f公會總部給我回話了'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<羅柏> &f說要去問東日漁村的魚類學者里德才行...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      3:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<羅柏>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [好吧,我現在就去問問看~]'
            goto: OBJECT 4
            
      4:
        type: SERVER_ACTIONS
        objective_detail: '&a<羅柏>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
        goto: OBJECT 5
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<羅柏> &f交給你了...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<羅柏> &f總是有一種不好的感覺...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      5:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 6
        toggle: false
        start_notify:
          title: '&e任務提示'
          title_subtitle: '&e與&a<里德#35>&f對話'
          message: '&e[任務提示]&f與&a<里德#35>&f對話'

      6:
        type: PLAYER_CITIZENS_NPC_INTERACT
        objective_detail: '&f與&a<里德#35>&f對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
        goto: OBJECT 7
        position:
          type: CITIZENS_NPC_RELATIVE_SINGLE
          npc: 49
        npc: 49
        
      7:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 8
        toggle: true
                
      8:
        type: SERVER_ACTIONS
        objective_detail: '&a<里德>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
        goto: OBJECT 9
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<里德> &f等一下,這是一個快要變異的食人魚魚鰭~'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<里德> &f這是哪裡來的?'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      9:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<里德>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [把事發經過告訴他]'
            goto: OBJECT 10
            
      10:
        type: SERVER_ACTIONS
        objective_detail: '&a<里德>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
        goto: OBJECT 11
        actions:
          - 'SEND_MESSAGE &e[1/15]&a<里德> &f竟然發生了這些事...等我一下...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/15]&a<里德> &f有了,這是我50多年前的研究'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/15]&a<里德> &f當時黑龍在大陸上遊走,黑龍經過的地方都會被感染黑龍的氣息'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[4/15]&a<里德> &f被感染的地方都發生了變化'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[5/15]&a<里德> &f其中海洋中的食人魚就被大規模感染'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[6/15]&a<里德> &f最後就全部都變異了!'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[7/15]&a<里德> &f這種變異的食人魚被命名為食人魚亞種!'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[8/15]&a<里德> &f但在黑龍被擊殺後...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[9/15]&a<里德> &f所有食人魚亞種都即時死亡了...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[10/15]&a<里德> &f當時還要大規模將牠們的屍體處理...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[11/15]&a<里德> &f用了大約2年的時間才全部處理好'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[12/15]&a<里德> &f現在竟然又出現了...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[13/15]&a<里德> &f黑龍還沒出現,怎麼會這樣...'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[14/15]&a<里德> &f我需要更多的情報才能繼續研究下去'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[15/15]&a<里德> &f請你去看看博多斯村莊附近有沒有奇怪的事發生吧'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      11:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 12
        toggle: false
          
      12:
        type: PLAYER_POSITION
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2053,63,-1408)'
        goto: OBJECT 13
        position:
          type: SPHERE_INSIDE
          radius: 5
          center: world,-2053,63,-1408
        start_notify:
          title: '&e任務提示'
          title_subtitle: '&e前往&a[博多斯村莊海域]'
          message: '&e[任務提示]&f前往&a[博多斯村莊海域]'
          
      13:
        type: SERVER_ACTIONS
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2053,63,-1408)'
        goto: OBJECT 14
        actions:
          - 'SEND_MESSAGE &b[故事劇情](這裡好像沒特別的事,再往前看看吧)'
          - WAIT_TICKS 40
          
      14:
        type: PLAYER_POSITION
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-1970,63,-948)'
        goto: OBJECT 15
        position:
          type: SPHERE_INSIDE
          radius: 5
          center: world,-1970,63,-948
          
      15:
        type: SERVER_ACTIONS
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-1970,63,-948)'
        goto: OBJECT 16
        actions:
          - 'SEND_MESSAGE &b[故事劇情](這裡也沒有事,再往前看看吧)'
          - WAIT_TICKS 40
          
      16:
        type: PLAYER_POSITION
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
        goto: OBJECT 17
        position:
          type: SPHERE_INSIDE
          radius: 5
          center: world,-2439,62,-1213
          
      17:
        type: SERVER_ACTIONS
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
        goto: OBJECT 18
        actions:
          - 'SEND_MESSAGE &b[故事劇情](這難道就是食人魚亞種？)'
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &b[故事劇情](不能讓這些食人魚亞種留在這裡！)'
          - WAIT_TICKS 40

      18:
        type: SERVER_ACTIONS
        objective_detail: '&f前往&a[博多斯村莊海域]'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
        goto: OBJECT 19
        actions:
          - WAIT_TICKS 2

      19:
        type: PLAYER_MYTHICMOBS_MOBS_KILL
        objective_detail: '&f擊殺&a【Lv27】叢林食人魚亞種 &e{objective_progression:0}&f/&e{objective_goal:0}'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e{objective_progression:0}&f/&e{objective_goal:0}'
        goto: OBJECT 20
        goals:
          0:
            mobs: '【Lv27】叢林食人魚亞種'
            goal: 10
        start_notify:
          title: '&e任務提示'
          title_subtitle: '&e擊殺&a【Lv27】叢林食人魚亞種'
          message: '&e[任務提示]&f擊殺&a【Lv27】叢林食人魚亞種'
            
      20:
        type: SERVER_ACTIONS
        objective_detail: '&f你心想...'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
        goto: OBJECT 21
        actions:
          - 'SEND_MESSAGE &b[故事劇情](好了,應該差不多了,先回去跟里德報告吧)'
          - WAIT_TICKS 40
            
      21:
        type: PLAYER_CITIZENS_NPC_INTERACT
        objective_detail: '&f與&a<里德#35>&f對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
        goto: OBJECT 22
        position:
          type: CITIZENS_NPC_RELATIVE_SINGLE
          npc: 49
        npc: 49
        start_notify:
          title: '&e任務提示'
          title_subtitle: '&e與&a<里德#35>&f對話'
          message: '&e[任務提示]&f與&a<里德#35>&f對話'

      22:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 23
        toggle: true

      23:
        type: SERVER_ACTIONS
        objective_detail: '&a<里德>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
        goto: OBJECT 24
        actions:
          - 'SEND_MESSAGE &e[1/3]&a<里德> &f竟然出現了這麼多的食人魚亞種？'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/3]&a<里德> &f那可不得了，我想公會總部一定要研究一下這事'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/3]&a<里德> &f黑龍可能早就復活了....'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      24:
        type: DIVERGE_CHAT
        objective_detail: '&f回應&a<里德>'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
        choices:
          0:
            text: '&d&l[故事劇情] 按我選擇 >> [不會吧...黑龍已經復活了嗎？]'
            goto: OBJECT 25
            
      25:
        type: SERVER_ACTIONS
        objective_detail: '&a<里德>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
        goto: OBJECT 26
        actions:
          - 'SEND_MESSAGE &e[1/3]&a<里德> &f黑龍的部份我就也不知道'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/3]&a<里德> &f因為我不是這方面的專家'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[3/3]&a<里德> &f你先回去跟公會的人說一聲吧'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      26:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 27
        toggle: false
        start_notify:
          title: '&e任務提示'
          title_subtitle: '&e與&a<羅柏#97>&f對話'
          message: '&e[任務提示]&f與&a<羅柏#97>&f對話'

      27:
        type: PLAYER_CITIZENS_NPC_INTERACT
        objective_detail: '&f與&a<羅柏#97>&f對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
          - '&f步驟-6 &f與&a<羅柏#97>&f對話'
        goto: OBJECT 28
        position:
          type: CITIZENS_NPC_RELATIVE_SINGLE
          npc: 92
        npc: 92
        
      28:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: OBJECT 29
        toggle: true
                
      29:
        type: SERVER_ACTIONS
        objective_detail: '&a<羅柏>&f正在與你對話'
        objective_detail_verbose:
          - '&f步驟-1 &f與&a<羅柏#97>&f對話'
          - '&f步驟-2 &f與&a<里德#35>&f對話'
          - '&f步驟-3 &f前往&a[博多斯村莊海域](-2439,62,-1213)'
          - '&f步驟-4 &f擊殺&a【Lv27】叢林食人魚亞種 &e10&f/&e10'
          - '&f步驟-5 &f與&a<里德#35>&f對話'
          - '&f步驟-6 &f與&a<羅柏#97>&f對話'
        goto: OBJECT 30
        actions:
          - 'SEND_MESSAGE &e[1/2]&a<羅柏> &f竟然是這樣!'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &e[2/2]&a<羅柏> &f我先跟公會說一聲,請你等等!'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          - 'SEND_MESSAGE &b[故事劇情](看來事情開始越來越嚴重了...)'
          - SEND_SOUND ENTITY_VILLAGER_AMBIENT
          - WAIT_TICKS 40
          
      30:
        type: SERVER_CAMERA_MODE_TOGGLE
        goto: QUEST_SUCCESS
        toggle: false
          
          
end_objects:
  success:
    a:
      type: SERVER_COMMANDS_PERFORM
      commands:
        - eco give {player} 1000
        - mmocore admin exp give {player} farm 48050
        - mmocore admin exp give {player} fishing 48050
        - mmocore admin exp give {player} food 48050
        - mmocore admin exp give {player} handicraft 48050
        - mmocore admin exp give {player} main 48050
        - mmocore admin exp give {player} mining 48050
        - mmocore admin exp give {player} alchemy 48050
  cancel:
    1:
      type: SERVER_COMMANDS_PERFORM
      commands: ['compass stop {player}']